# Dwarf Fortress Chronicles

Generate stories from Dwarf Fortress legends data.

## Distinctiveness and Complexity

- **Unique Domain:** Unlike common domains in earlier projects such as e-commerce or social media, this project operates in the unique domain of game world history narration. It required a deep dive into the data of Dwarf Fortress, and its world history files. It posed many questions such as how to interpret this data into engaging narratives while staying within the constraints posed by dealing with large amounts of data.

- **Complex Data Processing:** The project involves processing large amounts of data into a more desirable and succinct format. It requires converting XML files into JSON, interpreting the data, and generating narratives using AI. This introduced more challenges compared to purely handling standard data types in other applications.

- **AI Integration:** The use of AI to generate narratives adds a layer of complexity, mostly relating to the quirks of working with a third-party API. It required knowledge and research into the OpenAI API and how to seamlessly integrate it into a web application.

- **Stack:** This application was built with React and Django, and put together with Docker. It does not use any third-party CSS libraries, to reduce the overhead as well as improve my skills and familiarity with styling a web app. Using React in the front end also allowed me to use Django REST API and simplejwt for token-based authentication, further enhancing my understanding of the Django framework and working with APIs.

## File Descriptions

This only includes declarations and descriptions for files that are not automatically generated by any framework used in the web application, or those that have been heavily modified.

- ### **chronicle_compiler**

  -**.env**

  _.env is not included in the submission_
  _This is where the OpenAI API key is placed. This can be added by following the instructions in the Build section below_

  -**Dockerfile**
  Provides instructions to docker for creating and installing dependencies for the backend

- ### **frontend**

  -**browser**
  Holds files for the Browser app, a div that displays most information on the web application

  -**browser/upload/upload.css**

  -**browser/upload/uploadxmlform.js**

  Describes the style and function of the upload form for users to upload their game files to the web application

## Running the web app

### 1. **Build**

- **Docker:** In the main directory, run the following commands in your terminal.

  ```
  docker-compose build
  docker-compose up
  ```

- **Migrations:** Enter the backend docker image, and run the following commands in your terminal

  ```
  python manage.py makemigrations
  python manage.py migrate
  ```

- **AI:** By default, there will not be any communication with the OpenAI API, and the server will return a preset response.

  If you would like a real generation from the OpenAI API, follow these steps:

  - Create a `.env` file in `dfchronicles/backend` if it doesn't exist.
  - Add the following line to the `.env` file: `OPENAI_API_KEY=your_openAI_API_key`.

### 2. **Accessing the Site**

- **Frontend:** `localhost:3000`
- **Backend:** `localhost:8000`

### 3. **Creating your data**

- **Register:** Create an account via the link in the navigation bar.
- **XMLs:** You can download sample data to use [here].
- **Upload:** Upload the XMLs on the Upload page via the navigation bar.
- **Generation:** Select your preferred category and an intriguing event. The app will promptly respond with a unique story tailored to your selected event.

### Note:

- Ensure your `.env` file is configured with a valid OpenAI API key for generations to occur. Tiktoken is used to ensure only generations under a reasonable size will be sent to the API.
